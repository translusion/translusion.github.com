<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='An alternative to password keepers such as 1Password.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Deterministic Password Generator • Translusion'>
<meta property='og:description' content='An alternative to password keepers such as 1Password.'>
<meta property='og:url' content='https://blog.translusion.com/posts/dulgt-intro/'>
<meta property='og:site_name' content='Translusion'>
<meta property='og:type' content='article'><meta property='article:section' content='posts'><meta property='article:published_time' content='2014-05-04T00:00:00Z'/><meta property='article:modified_time' content='2014-05-04T00:00:00Z'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.55.6" />

  <title>Deterministic Password Generator • Translusion</title>
  <link rel='canonical' href='https://blog.translusion.com/posts/dulgt-intro/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.6a060eb7.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-posts has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/'>
      Translusion
      </a>
    </h2>
    <div class='desc'>
    Erik Engheim&#39;s Projects and Stories
    </div>
  </header>

</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/'></a>
      </li><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/posts/'>Blog</a>
      </li><li class='item'>
        <a href='/stories/'>Stories</a>
      </li><li class='item'>
        <a href='/maker/'>Maker</a>
      </li><li class='item'>
        <a href='/apps/'>Apps</a>
      </li><li class='item'>
        <a href='/projects/'>Projects</a>
      </li><li class='item'>
        <a href='https://github.com/ordovician'>Repo</a>
      </li><li class='item'>
        <a href='https://nextjournal.com/erik-engheim'>Papers</a>
      </li><li class='item'>
        <a href='/favorites/'>Favorites</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'\2f '}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/'></a></li><li><a href='/posts/'>Posts</a></li><li><span>Deterministic Password Generator</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Translusion</p><p class='desc site-desc'>Erik Engheim&#39;s Projects and Stories</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Deterministic Password Generator</h1>
      
<p class='desc'>An alternative to password keepers such as 1Password.</p>


    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2014-05-04T00:00:00Z'>2014, May 04</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
6 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<p>The heartbleed exploit made  me thing of my own way of keeping passwords which relies on 1Password. What was painfull with 1Password was having to regenerate every single password I have over again. That is a lot of work. The second problem because all my passwords are too hard to remember, I am screwed if I ever lose my encrypted database of passwords. So I also make paper copies, but they have to be made secure as well, so they can not be used directly in their paper form.</p>

<p>So this has left me with desirng a better solution. Deterministic password generators seem attractive, but there is no one program that works exactly how I want it to work. But there are a of neat ideas out there.</p>

<h1 id="existing-solutions">Existing Solutions</h1>

<h3 id="enigma">Enigma</h3>

<p><a href="https://itunes.apple.com/us/app/enigma/id527555438?mt=12" target="_blank">Enigma</a> looks pretty cool, but they had horrible customer support and have trouble with basic english. So not the kind of people I want to entrust with generating my passwords. Should I get a problem with their solution I need crystal clear communication. Also any solution should be open source, so you know exactly how the passwords are made and which makes it possible for you to roll your own solution should the company go belly up.</p>

<h3 id="generator-without-single-point-of-failure">Generator without Single Point of failure</h3>

<p>John Metta has some interesting <a href="http://mettadore.com/ruby/secure-password-generator-as-manager-without-single-point-failure/" target="_blank">ideas</a> on how to do this, but he doesn&rsquo;t have a product yet that he can vouch for. Anyway I&rsquo;ll keep my eye on his progress.</p>

<h3 id="pronouncable-passwords">Pronouncable Passwords</h3>

<p>I kind of like pronounable passwords because they are far easier to remember. <a href="http://passkool.sourceforge.net" target="_blank">PassKool</a> is a python script which uses this approach. However I have to check how safe this is. Making them pronounable of course reduces the search space for a hacker. <a href="http://www.iusmentis.com/security/passphrasefaq/" target="_blank">Passphrase FAQ</a> might be the place to learn how to do it.</p>

<h1 id="what-i-want-in-a-solution">What I want in a Solution</h1>

<ol>
<li>Open source</li>
<li>Based on well established standards which are can be verified to be safe without being a crypto expert.</li>
<li>Should be very easy to recreate the code for generating the passwords, should the original program get lost.</li>
<li>On multiple platforms. I want the tool accessible from my phone, desktop, browser and command line.</li>
<li>Stores a list of sites or places I have made passwords for and settings used, so I don&rsquo;t forget that I actually have a password already for said site. I actually often forget that.</li>
<li>Should be easy to use. So I should mostly have to write a really easy password.</li>
<li>Paper backups. Should be easy to print out a piece of paper from the app containing key information. E.g. by using QR codes so it is really easy to restore a backup.</li>
<li>Should be secure, so that hackers can&rsquo;t easily break my master password once they get hold of one of my passwords.</li>
</ol>

<p>(6) and (8) are obviously at odds with each other. My approach here would be to rely on certain assumptions:</p>

<ul>
<li>An attacker will most likely attack me online.</li>
<li>He will not break into my house.</li>
</ul>

<p>So my current idea for a solution relies on the following:</p>

<ol>
<li>One simple password whic his what is mostly asked of me.</li>
<li>A hard to guess completely random component which I can not hope to remember. This will be stored on paper and will remain in memory for a limited amount of time. So occasionally it will need to be brought back using a QR code scanner e.g. Or if no camera is present with manual typing.</li>
<li>The on paper is encrypted with my simple password so that should somebody accidentally get hold of my paper backup then can&rsquo;t use it unless they know something about hacking.</li>
</ol>

<p>The security of the individual points can be tweaked. The assumption here is that ultimately nothing is completely secure. It is all about making it really inconveient for the hacker. If you don&rsquo;t have important secrets or are not an important or wealthy person, we can assume that less security is needed, so that people may e.g. chose themselves whether the paper data should be encrypted and e.g. for how long the hard passwords should remain valid in memory. If your security needs are lower you could let the password stay indefintitly in memory. You could even store it permanently on disk.</p>

<p>There should be a lot of options to make sure the generator works for everyones needs.</p>

<h2 id="technologies-i-should-probably-use">Technologies I should probably use</h2>

<p>I should probably use <a href="http://en.wikipedia.org/wiki/Hash-based_message_authentication_code" target="_blank">HMAC</a>(Hash-based message authentication code) because that is designed to hash using a secret key. Normally we hash like this:</p>

<pre><code>digest = hash(message, salt)
</code></pre>

<p>With HMAC it is:</p>

<pre><code>digest = hash(message, salt, secret)
</code></pre>

<p>This is better than doing:</p>

<pre><code>digest = hash(message || secret, salt)
</code></pre>

<p>where <code>||</code> means concatenate. Apparently this is potentially exploitable because you can create the hash without knowing all of the separate parts.</p>

<p>But I don&rsquo;t think HMAC is specifically design for generating passwords. So using <code>bcrypt</code> or <code>scrypt</code> might be better. Potentially I could combine them with HMAC in some way.</p>

<p><a href="http://golang.org/pkg/crypto/hmac/" target="_blank">HMAC in standard Go package</a> Takes as argument a hash function, key and message.<br></p>

<p><a href="https://code.google.com/p/go/source/browse/scrypt/scrypt.go?repo=crypto" target="_blank">scrypt for Go</a> It uses a password, salt, some parameter which specify CPU and memory usage to slow it down. We could perhaps input generated key from scrypt into HMAC<br></p>

<p><a href="https://code.google.com/p/go/source/browse/?repo=crypto" target="_blank">All crypto functions you might need in Go</a> This contains bcrypt, blowfish, SHA3, PBKDF2 etc.<br></p>

<h1 id="list-of-existing-solutions">List of existing solutions</h1>

<p><a href="http://www.xanthir.com/password/" target="_blank">xanthir.com</a> Configure length, allowed characters. Poor security with SHA-1 hash<br></p>

<p><a href="http://plevyak.com/dpg.html" target="_blank">plevyak.com</a> Skein-512 based. Looks promising with use of option distinguishing Information<br></p>

<p><a href="http://supergenpass.com" target="_blank">SuperGenPass</a> Made to drop down from bookmarks and work on mobile homescreen. Easy to use but doesn&rsquo;t seem to be based on generally accepted good practice. In source code it looks like MD5 or SHA1 is used with just 10 iterators. That seems like bad choices. Should be far more iterations and with a better hash function such as SHA2 or SHA3 or bcrypt.<br></p>

<p><a href="https://www.pwdhash.com" target="_blank">Standford PwdHash</a> Transparently converts a user password to a domain specific password. Is possibly using MD5 for hashing which is not desirably. Creator also reserves the right to change the tool.</p>

<p><a href="http://fuktommy.com/genpasswd/" target="_blank">Fuktommy genpasswd</a> A very simple version using SHA-1. Easy to read code. No iterations (no stretching) so poor security.<br></p>

<p><a href="http://passhash.connorhd.co.uk" target="_blank">PassHash</a> Very simple. Uses SHA246-HMAC, but likely no iterations.<br></p>

<p><a href="http://ctrlq.org/passwords/" target="_blank">Secure Passwords</a> Clean design using bcrypt. A bit too simple perhaps, but with good help instructions.<br></p>

<h1 id="resources">Resources</h1>

<p><a href="https://crackstation.net/hashing-security.htm" target="_blank">crackstation</a> Great info on hashing. E.g. on why you shouldn&rsquo;t invent your own wacky hashing solutions by combining existig ones. Correct use of salt etc.<br></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='categories'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
<span class='screen-reader-text'>Categories: </span><a class='category' href='/categories/cryptography/'>Cryptography</a>, <a class='category' href='/categories/passwords/'>Passwords</a>, <a class='category' href='/categories/login/'>Login</a>, <a class='category' href='/categories/project/'>Project</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/posts/debugavrproject/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Debugging AVR projects</a>
    </div><div class='next-entry sep-before'>
      <a href='/posts/learning-rails/'>
        <span class='screen-reader-text'>Next post: </span>Learning Web Development with Rails<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "translusion" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/ordovician' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/erikengheim' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:erik.engheim@mac.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/erik-engheim-b8831917' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li><li>
        <a href='https://www.youtube.com/channel/UC66PjfTxpg19YCGPUOLzyOg' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Youtube account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z" />
  <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" />
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p>© Erik Engheim 2016. All rights reserved.</p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.67d669ac.js'></script>

</body>

</html>

