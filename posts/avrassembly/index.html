<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> AVR Assembly programming on Mac OS X &middot; Trans lusion </title>

  
  <link rel="stylesheet" href="http://translusion.github.com/css/poole.css">
  <link rel="stylesheet" href="http://translusion.github.com/css/syntax.css">
  <link rel="stylesheet" href="http://translusion.github.com/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="http://translusion.github.com/css/style.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Trans lusion" />
</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Trans lusion</h1>
      <p class="lead">
       Erik Engheim&#39;s Projects and Articles 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      <li><a href="/maker">Maker</a> </li>      
      <li><a href="/posts">Blog</a> </li>      
      
    </ul>

    <p>Â© Erik Engheim 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
<div class="post">
  <h1>AVR Assembly programming on Mac OS X</h1>
  <span class="post-date">Tue, Mar 5, 2013</span>
      <p>When starting with out programming the <a href="http://en.wikipedia.org/wiki/Atmel_AVR">AVR</a> microcontroller on OS X, you will probably start by using <a href="http://www.obdev.at/products/crosspack/index.html">CrossPack</a>. However the problem with that is it doesn&rsquo;t come with a compiler meant to be used directly by you. It is mainly there for the C compiler. <a href="http://www.obdev.at/products/crosspack/index.html">CrossPack</a> installs the AVR GNU assembler <strong>avr-as</strong> described <a href="http://www.nongnu.org/avr-libc/user-manual/assembler.html">here</a>. The assembly files typically end with <strong>.S</strong>. You can invoke it through gcc with e.g.</p>

<pre><code>avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=attiny13 -x assembler-with-cpp -c ledflash.S
</code></pre>

<p>This will assemble the file <em>ledflash.S </em>for the AVR microcontroller unit (MCU) ATtiny13. The problem with this assembler is that it does not use the same directives as the the official ATMEL  assembler. Most example code and tutorials you can find online is written according to the ATMEL assembler.</p>

<p>Fortunatly if you look around you can find the open source <a href="http://avra.sourceforge.net">avra</a> assembler. A problem when first googling is that an older assembler <strong>tavrasm</strong> will more likely pop up first in your search. Ignore this one. It does not seem to be maintained.</p>

<p><a href="http://avra.sourceforge.net">avra</a> is newer and is very  easy to compile yourself. There are no dependencies. You just have to give a list of files to gcc or clang to compile it. To check that everything has been assembled correctly you can use the <a title="vAVRdiasm" href="https://github.com/vsergeev/vAVRdisasm">vAVRdiasm</a> to diassemble the .hex file and see that you get back something that looks like what you put in ;-)</p>

<p>There is also a TextMate <a title="avr-assembly bundle" href="https://github.com/mherb/avr-assembly.tmbundle">bundle avr-assembly</a> which you can install which makes it possible to have syntax highlight for your AVR assemble programming.</p>

<p>As a final note, be aware that you have to fiddle a little bit with all of this software. A lot of stuff did not work exactly as the manual said. It is usually just very minor adjustments to make it work. E.g. the TextMate bundle instructions gave the wrong path to bundles for TextMate2.</p>

      
      <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost") 
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'translusion';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the comments powered by <a href="http://disqus.com/?ref_noscript">Disqus.</a></noscript>
      
</div>
</div>

  </body>
</html>
